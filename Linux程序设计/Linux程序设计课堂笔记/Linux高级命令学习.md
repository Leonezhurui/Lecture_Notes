# Linux高级命令学习

> By Leonezhurui, Software Engineering



## awk

**awk是一个强大的文本分析工具，简单来说awk就是把文件逐行读入，（空格，制表符）为默认分隔符将每行切片，切开的部分再进行各种分析处理。**

awk命令格式如下：

```
awk [-F field-separator] 'commands' input-file(s)
```

[-F 分隔符]是可选的，因为awk**使用空格、制表符作为缺省的字段分隔符**，因此如果要浏览字段间有空格，制表符的文本，不必指定这个选项，但如果要浏览诸如/etc/passwd文件，此文件各字段以冒号作为分隔符，则必须指明-F选项。



## xargs

**xargs 是给命令传递参数的一个过滤器，可以将管道或标准输入的数据转换成参数，默认的命令是 echo，这意味着通过管道传递给 xargs 的输入将会包含换行，不过通过 xargs 的处理，换行将被空格取代。**

```shell
 find ./ -name "*.c" | awk -F "." '{print $2}' | xargs -i -t mv ./{}.c ./{}.h
```





## sed

**sed**是一种流编辑器，它是文本处理中非常好的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件，可以将数据行进行替换、删除、新增、选取等特定工作，简化对文件的反复操作，编写转换程序等。



**命令格式**

```shell
sed的命令格式：sed [options] 'command' file(s);

sed的脚本格式：sed [options] -f scriptfile file(s);
```

**选项**

```shell
 -e ：直接在命令行模式上进行sed动作编辑，此为默认选项;

 -f ：将sed的动作写在一个文件内，用–f filename 执行filename内的sed动作;

 -i ：直接修改文件内容;

 -n ：只打印模式匹配的行；

 -r ：支持扩展表达式;

 -h或--help：显示帮助；

 -V或--version：显示版本信息。
```



```
s 替换指定字符;
```

**sed替换标记**

```
 g 表示行内全面替换;

 p 表示打印行;

 w 表示把行写入一个文件;

 x 表示互换模板块中的文本和缓冲区中的文本;

 y 表示把一个字符翻译为另外的字符（但是不用于正则表达式）;
 
 \1 子串匹配标记;

 & 已匹配字符串标记;
```

**sed元字符集**

```
 ^ 匹配行开始，如：/^sed/匹配所有以sed开头的行;
 
 $ 匹配行结束，如：/sed$/匹配所有以sed结尾的行;
 
 . 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d;
 
 * 匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行;
  
 [] 匹配一个指定范围内的字符，如/[ss]ed/匹配sed和Sed;
   
 [^] 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行;
  
 \(..\) 匹配子串，保存匹配的字符，如s/\(love\)able/\1rs，loveable被替换成lovers;
  
 & 保存搜索字符用来替换其他字符，如s/love/**&**/，love这成**love**;
  
 \< 匹配单词的开始，如:/\ 
 \> 匹配单词的结束，如/love\>/匹配包含以love结尾的单词的行;
 
 x\{m\} 重复字符x，m次，如：/0\{5\}/匹配包含5个0的行;
 
 x\{m,\} 重复字符x，至少m次，如：/0\{5,\}/匹配至少有5个0的行;
 
 x\{m,n\} 重复字符x，至少m次，不多于n次，如：/0\{5,10\}/匹配5~10个0的行;
```

注意：sed的处理方式是按行处理，对每行处理时\n已被忽略。



## tr

Linux tr 命令用于转换或删除文件中的字符。

tr 指令从标准输入设备读取数据，经过字符串转译后，将结果输出到标准输出设备。

-d, --delete：删除指令字符

注意：tr最好不要替换字符数量不一致(会有问题的)。

```shell
tr [参数] [字符串1] [字符串2]
```



常见的tr的格式：

```shell
cat xxx.txt | tr "xx" "yy"
tr [a-z] [A-Z] < file.txt
```



## -exec

linux中的 exec命令，-exec 后面跟的是linux的 command 命令，exec命令以分号结束‘；’， 该分号前面要放 反斜杠转义 。

```
find . -name jquery.js -exec cat {} \;
```

{} 花括号代表前面的命令执行的结果。　



Linux程序设计的一道题

```shell
find ./ -name "a.cpp" -exec rename 's#(.*/)a([^/].cpp)#$1b$2.c#g' {} \;
```

